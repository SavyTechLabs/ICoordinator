<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ICoordinator - Byggplanering</title>
    <link rel="stylesheet" href="css/style.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- PDF.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script>pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';</script>
    <!-- SheetJS (XLSX) -->
    <script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- Left Sidebar: File Management -->
        <aside class="sidebar left-sidebar">
            <div class="logo-area">
                <h1>ICoordinator</h1>
            </div>
            
            <div class="panel-section">
                <h2>Filer</h2>
                <div class="file-input-group">
                    <label for="layout-upload" class="btn btn-primary full-width">
                        üìÇ Ladda upp Layout (PDF/Bild)
                    </label>
                    <input type="file" id="layout-upload" accept="image/*,.pdf" hidden>
                </div>
                
                <div class="file-input-group">
                    <label for="schedule-upload" class="btn btn-secondary full-width">
                        üìÖ Importera Tidplan (Excel)
                    </label>
                    <input type="file" id="schedule-upload" accept=".xlsx,.xls" hidden>
                </div>

                <div class="file-input-group">
                    <button id="btn-export-json" class="btn btn-outline full-width">üíæ Exportera Projekt (JSON)</button>
                    <button id="btn-import-json" class="btn btn-outline full-width" onclick="document.getElementById('json-upload').click()">üì• Importera Projekt (JSON)</button>
                    <input type="file" id="json-upload" accept=".json" hidden>
                </div>
            </div>

            <div class="panel-section">
                <h2>Verktyg</h2>
                <div class="tools-grid">
                    <button id="tool-select" class="tool-btn active" title="Markera/Flytta">
                        <span class="icon">üëÜ</span>
                    </button>
                    <button id="tool-draw" class="tool-btn" title="Rita Zon">
                        <span class="icon">‚úèÔ∏è</span>
                    </button>
                </div>
            </div>
            
            <div class="panel-section" style="flex: 1; overflow-y: auto; min-height: 0;">
                <h2>Aktiviteter</h2>
                <div id="schedule-list" class="schedule-list">
                    <p class="text-muted small" style="padding: 0.5rem; color: var(--text-muted);">Importera en Excel-fil f√∂r att se aktiviteter h√§r.</p>
                </div>
            </div>
        </aside>

        <!-- Center: Canvas Area -->
        <main class="canvas-area">
            <div id="canvas-wrapper" class="canvas-wrapper">
                <canvas id="main-canvas"></canvas>
                <div id="empty-state" class="empty-state">
                    <p>Ladda upp en layout f√∂r att b√∂rja planera</p>
                </div>
            </div>
            <div class="canvas-controls">
                <button id="zoom-in" class="icon-btn">+</button>
                <span id="zoom-level">100%</span>
                <button id="zoom-out" class="icon-btn">-</button>
            </div>
        </main>

        <!-- Right Sidebar: Metadata -->
        <aside class="sidebar right-sidebar">
            <div class="panel-header">
                <h2>Zon Egenskaper</h2>
            </div>
            
            <div id="metadata-content" class="metadata-content hidden">
                <div class="form-group">
                    <label>ID</label>
                    <input type="text" id="meta-id" readonly class="input-readonly">
                </div>

                <div class="form-group">
                    <label>Namn / Zon</label>
                    <input type="text" id="meta-name" placeholder="Namnge zonen...">
                </div>

                <div class="form-group">
                    <label>Disciplin</label>
                    <select id="meta-discipline">
                        <option value="">V√§lj disciplin...</option>
                        <option value="construction">Bygg</option>
                        <option value="electrical">El</option>
                        <option value="plumbing">VVS</option>
                        <option value="ventilation">Ventilation</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Status</label>
                    <select id="meta-status">
                        <option value="planned">Planerad</option>
                        <option value="in-progress">P√•g√•ende</option>
                        <option value="completed">Klar</option>
                        <option value="delayed">F√∂rsenad</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>F√§rg</label>
                    <input type="color" id="meta-color" class="color-input">
                </div>

                <div class="form-group">
                    <label>Kommentarer</label>
                    <textarea id="meta-comments" rows="4"></textarea>
                </div>

                <div class="divider"></div>
                
                <h3>Anpassade F√§lt</h3>
                <div id="custom-fields-container"></div>
                <button id="btn-add-field" class="btn btn-small btn-text">+ L√§gg till f√§lt</button>

                <div class="divider"></div>
                <button id="btn-delete-zone" class="btn btn-danger full-width">Ta bort Zon</button>
            </div>

            <div id="metadata-empty" class="metadata-empty">
                <p>Markera en zon f√∂r att redigera egenskaper</p>
            </div>
        </aside>
    </div>

    <!-- Scripts -->
    <script src="js/utils.js"></script>
    <script src="js/data-manager.js"></script>
    <script src="js/canvas-manager.js"></script>
    <script src="js/ui-manager.js"></script>
    <script src="js/app.js"></script>
</body>
</html>